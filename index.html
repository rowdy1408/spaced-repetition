<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω L·ªõp H·ªçc</title>
    <link rel="icon" type="image/png" href="https://i.pinimg.com/736x/c4/dd/3f/c4dd3f0696ccc6790f6ee84ff2031a5b.jpg">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="login-page" class="page container">
        <header>
            <h1>üéì Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá Th·ªëng Qu·∫£n L√Ω L·ªãch √în T·∫≠p Spaced Repetition</h1>
            <p>Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c</p>
        </header>
        <main class="login-container">
            <button id="btn-google-login">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                <span>ƒêƒÉng nh·∫≠p v·ªõi Google</span>
            </button>
        </main>
    </div>

    <div id="app-content">
        <div id="user-bar" class="container">
            <div id="user-info"></div>
            <button id="btn-logout" class="btn-secondary">ƒêƒÉng xu·∫•t</button>
        </div>

        <div id="home-page" class="page container">
            <header>
                <h1>üéì H·ªá Th·ªëng Qu·∫£n L√Ω L·ªõp H·ªçc</h1>
                <p>Ch√†o m·ª´ng gi√°o vi√™n quay tr·ªü l·∫°i!</p>
            </header>
            <main class="home-buttons">
                <button id="btn-show-create-form">‚ûï T·∫°o L·ªõp H·ªçc M·ªõi</button>
                <button id="btn-show-class-list">üìö Xem C√°c L·ªõp Hi·ªán C√≥</button>
            </main>
        </div>

        <div id="form-page" class="page container" style="display:none;">
            <header>
                <h1 id="form-title">T·∫°o L·ªõp H·ªçc M·ªõi</h1>
                <a href="#" class="back-link" data-target="home-page">&larr; Quay l·∫°i trang ch·ªß</a>
            </header>
            <main>
                <form id="class-form" class="controls">
                    <div class="control-group">
                        <label for="class-name">T√™n l·ªõp (t·ª± ghi)</label>
                        <input type="text" id="class-name" required>
                    </div>
                    <div class="control-group">
                        <label for="course-type">Ch·ªçn lo·∫°i l·ªõp:</label>
                        <select id="course-type">
                            <option value="starters-movers-flyers">Starters-Movers-Flyers</option>
                            <option value="ket-pet">KET-PET</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="num-units">S·ªë l∆∞·ª£ng Unit</label>
                        <input type="number" id="num-units" required min="1" value="20">
                    </div>
                     <div class="control-group">
                        <label for="lessons-per-unit">S·ªë l∆∞·ª£ng lesson m·ªói Unit</label>
                        <input type="number" id="lessons-per-unit" required min="1" value="2">
                    </div>
<div class="control-group">
    <label for="class-type">Ch·ªçn m√¥ h√¨nh l·ªõp h·ªçc:</label>
    <select id="class-type">
        <option value="2-4">L·ªõp th·ª© 2 - 4</option>
        <option value="3-5">L·ªõp th·ª© 3 - 5</option>
        <option value="4-6">L·ªõp th·ª© 4 - 6</option>
        <option value="7-cn">L·ªõp th·ª© 7 - CN</option>
        <option value="2-4-6">L·ªõp th·ª© 2 - 4 - 6</option>
        <option value="3-5-7">L·ªõp th·ª© 3 - 5 - 7</option>
        <option value="custom">Kh√°c (T·ª± ch·ªçn ng√†y)</option>
    </select>
</div>

<div class="control-group" id="custom-days-container" style="display: none;">
    <label>Tick ch·ªçn c√°c ng√†y h·ªçc:</label>
    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <label><input type="checkbox" name="custom-day" value="1"> T2</label>
        <label><input type="checkbox" name="custom-day" value="2"> T3</label>
        <label><input type="checkbox" name="custom-day" value="3"> T4</label>
        <label><input type="checkbox" name="custom-day" value="4"> T5</label>
        <label><input type="checkbox" name="custom-day" value="5"> T6</label>
        <label><input type="checkbox" name="custom-day" value="6"> T7</label>
        <label><input type="checkbox" name="custom-day" value="0"> CN</label>
    </div>
</div>
                     <div class="control-group">
                        <label for="start-date">Ch·ªçn ng√†y khai gi·∫£ng:</label>
                        <input type="date" id="start-date" required>
                    </div>
                    <div class="control-group">
                        <label for="mini-test-dates">Ng√†y Mini Test (nh·∫≠p th·ªß c√¥ng)</label>
                        <input type="text" id="mini-test-dates" placeholder="VD: 25/11/2025, 30/12/2025">
                    </div>
                    <div class="control-group">
                        <label for="schedule-file">
                            Ho·∫∑c T·∫£i L√™n L·ªãch H·ªçc (file .csv)
                        </label>
                        <div class="file-upload-wrapper">
                            <label for="schedule-file" class="btn-upload">üìÅ Ch·ªçn File</label>
                            <span id="show-csv-guide" title="Xem h∆∞·ªõng d·∫´n t·∫°o file .csv">?</span>
                        </div>
                        <small id="file-feedback">Ch∆∞a c√≥ file n√†o ƒë∆∞·ª£c ch·ªçn.</small> 
                        <input type="file" id="schedule-file" accept=".csv" class="file-input-hidden">
                    </div>
                    <button type="submit" id="form-submit-btn">T·∫°o L·ªõp</button>
                </form>
                <div id="form-error-message" class="error"></div>
            </main>
        </div>

        <div id="class-list-page" class="page container" style="display:none;">
            <header>
                <h1>üìö C√°c L·ªõp Hi·ªán C√≥</h1>
                <a href="#" class="back-link" data-target="home-page">&larr; Quay l·∫°i trang ch·ªß</a>
            </header>
            <main id="class-list-container"></main>
        </div>
        
        <div id="schedule-details-page" class="page container result-container" style="display:none;">
            <header>
                <h1 id="schedule-class-name">üóìÔ∏è L·ªãch H·ªçc Chi Ti·∫øt</h1>
                <div class="header-actions">
                    <a href="#" class="back-link" data-target="class-list-page">&larr; Quay l·∫°i danh s√°ch l·ªõp</a>
                </div>
            </header>
            <main>
                <div id="today-summary">
                    <!-- JS ƒëi·ªÅn v√†o -->
                </div>

                <div class="lookup-wrapper">
                    <label for="lookup-date">üìÖ Tra c·ª©u nhanh theo ng√†y:</label>
                    <input type="date" id="lookup-date">
                    <div id="lookup-summary"><p>Ch·ªçn m·ªôt ng√†y ƒë·ªÉ xem t√≥m t·∫Øt.</p></div>
                </div>

                <div class="table-header-wrapper">
                    <h2 class="table-title">B·∫£ng L·ªãch Chi Ti·∫øt</h2>
                    <button id="btn-undo" class="btn-secondary hidden">‚Ü©Ô∏è Ho√†n t√°c</button>
                </div>
                
                <div class="table-wrapper">
                    <table>
                        <thead id="schedule-header">
                            <!-- JS ƒëi·ªÅn v√†o -->
                        </thead>
                        <tbody id="schedule-body"></tbody>
                    </table>
                </div>
            </main>
        </div>

        <div id="student-list-page" class="page container" style="display:none;">
    <header>
        <h1 id="student-class-name">üë®‚Äçüéì L·ªãch √¥n</h1>
        <div class="header-actions">
             <button id="btn-add-student">‚ûï Th√™m H·ªçc Vi√™n</button>
             <a href="#" class="back-link" data-target="class-list-page">&larr; Quay l·∫°i danh s√°ch l·ªõp</a>
        </div>
    </header>
    <main>
        <div id="student-list-container" class="student-grid">
            </div>
    </main>
</div>

<div id="student-detail-page" class="page container" style="display:none;">
    <header class="student-header">
        <div class="student-profile-summary">
            <img id="detail-student-avatar" src="" alt="Avatar" class="avatar-large">
            <div class="student-stats">
                <h1 id="detail-student-name">T√™n H·ªçc Vi√™n</h1>
                <p id="detail-student-rank" class="rank-badge">Danh hi·ªáu: T·∫≠p S·ª±</p>
                <div class="xp-bar-container">
                    <div id="detail-xp-bar" class="xp-bar-fill" style="width: 0%;"></div>
                    <span id="detail-xp-text">0/80 EXP (Level 1)</span>
                </div>
            </div>
        </div>
        <a href="#" class="back-link" data-target="student-list-page">&larr; Quay l·∫°i danh s√°ch HS</a>
    </header>
    <main>
        <h3 class="section-title">‚úÖ Ti·∫øn ƒë·ªô h·ªçc t·∫≠p & L·ªãch √¥n luy·ªán c√° nh√¢n</h3>
        <p class="subtitle">T√≠ch v√†o √¥ b√™n tr√°i khi b√© h·ªçc xong b√†i. H·ªá th·ªëng s·∫Ω t·ª± t√≠nh ng√†y √¥n t·∫≠p theo l·ªãch (Ng√†y +1, +3, +7...).</p>
        <div class="table-wrapper">
    <table class="task-table"> <thead>
            <tr>
                <th style="width: 15%;">Ng√†y √¥n</th>
                <th style="width: 70%;">N·ªôi dung nhi·ªám v·ª•</th>
                <th style="width: 15%; text-align: center;">Tr·∫°ng th√°i</th>
            </tr>
        </thead>
        <tbody id="student-progress-body">
            </tbody>
    </table>
</div>
    </main>
</div>

<div id="add-student-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <h3>Th√™m H·ªçc Vi√™n M·ªõi</h3>
        <form id="add-student-form">
            <div class="control-group">
                <label>T√™n h·ªçc vi√™n:</label>
                <input type="text" id="new-student-name" required>
            </div>
            <div class="control-group">
                <label>Avatar (·∫¢nh vu√¥ng ƒë·∫πp nh·∫•t):</label>
                <input type="file" id="new-student-avatar" accept="image/*" required>
                <div class="avatar-preview">
                    <img id="avatar-preview-img" src="https://via.placeholder.com/100" alt="Preview">
                </div>
            </div>
            <div class="modal-actions">
                <button type="submit" class="btn-primary">L∆∞u</button>
                <button type="button" id="btn-cancel-add-student" class="btn-secondary">H·ªßy</button>
            </div>
        </form>
    </div>
</div>
</div>

<div id="edit-student-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <h3>S·ª≠a Th√¥ng Tin H·ªçc Vi√™n</h3>
        <form id="edit-student-form">
            <input type="hidden" id="edit-student-id">
            <div class="control-group">
                <label>T√™n h·ªçc vi√™n:</label>
                <input type="text" id="edit-student-name" required>
            </div>
            <div class="control-group">
                <label>Avatar M·ªõi (B·ªè qua n·∫øu kh√¥ng ƒë·ªïi):</label>
                <input type="file" id="edit-student-avatar" accept="image/*">
                <div class="avatar-preview">
                    <img id="edit-avatar-preview-img" src="" alt="Preview">
                </div>
            </div>
            <div class="modal-actions">
                <button type="submit" class="btn-primary">L∆∞u Thay ƒê·ªïi</button>
                <button type="button" id="btn-cancel-edit-student" class="btn-secondary">H·ªßy</button>
            </div>
        </form>
    </div>
</div>

<div id="delete-student-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <h3>üóëÔ∏è X√°c nh·∫≠n x√≥a</h3>
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a h·ªçc vi√™n <strong id="delete-student-name-display"></strong>?</p>
        <p style="color: red; font-size: 0.9em;">M·ªçi d·ªØ li·ªáu ƒëi·ªÉm s·ªë v√† ti·∫øn ƒë·ªô c·ªßa b√© s·∫Ω m·∫•t vƒ©nh vi·ªÖn.</p>
        <div class="modal-actions">
            <button id="btn-confirm-delete-student" class="btn-danger">X√≥a lu√¥n</button>
            <button id="btn-cancel-delete-student" class="btn-secondary">Gi·ªØ l·∫°i</button>
        </div>
    </div>
</div>


    <div id="delete-confirm-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3>X√°c nh·∫≠n x√≥a</h3>
            <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªõp h·ªçc n√†y kh√¥ng? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
            <div class="modal-actions">
                <button id="btn-confirm-delete" class="btn-danger">C√≥, x√≥a l·ªõp</button>
                <button id="btn-cancel-delete" class="btn-secondary">Kh√¥ng, gi·ªØ l·∫°i</button>
            </div>
        </div>
    </div>

    <div id="csv-guide-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content modal-content-large">
            <h3>H∆∞·ªõng d·∫´n xu·∫•t file .csv</h3>
            <p>ƒê·ªÉ t·∫£i l·ªãch h·ªçc l√™n, file c·ªßa b·∫°n ph·∫£i c√≥ ƒë·ªãnh d·∫°ng <strong>.csv</strong> v√† ch·ª©a c√°c c·ªôt theo y√™u c·∫ßu.</p>
            
            <div class="guide-container">
                <div class="guide-column">
                    <h4>‚ö†Ô∏è Y√™u c·∫ßu ƒë·ªãnh d·∫°ng file</h4>
                    <p>File c·ªßa b·∫°n b·∫Øt bu·ªôc ph·∫£i c√≥ d√≤ng ti√™u ƒë·ªÅ ch·ª©a c·ªôt <strong>"B√†i h·ªçc"</strong> v√† c·ªôt <strong>"Ng√†y h·ªçc"</strong>. ƒê·ªãnh d·∫°ng ng√†y ph·∫£i l√† <code>DD/MM/YYYY</code>.</p>
                    <img src="https://i.imgur.com/eBODc3p.png" alt="ƒê·ªãnh d·∫°ng file CSV m·∫´u c√≥ ng√†y h·ªçc" style="width:100%; border:1px solid #ddd; border-radius: 8px;">
                    <p style="margin-top:10px;"><em>L∆∞u √Ω: Kh√¥ng d√πng Google Docs. Ch·ªâ d√πng Google Sheets ho·∫∑c Excel.</em></p>
                </div>
                <div class="guide-column">
                    <h4>üìÑ H∆∞·ªõng d·∫´n cho Google Sheets</h4>
                    <ol>
                        <li>M·ªü file Google Sheets c·ªßa b·∫°n.</li>
                        <li>V√†o menu <strong>T·ªáp (File)</strong> ‚Üí <strong>T·∫£i xu·ªëng (Download)</strong>.</li>
                        <li>Ch·ªçn <strong>Gi√° tr·ªã ƒë∆∞·ª£c ph√¢n t√°ch b·∫±ng d·∫•u ph·∫©y (.csv)</strong>.</li>
                    </ol>
                    <h4>üìä H∆∞·ªõng d·∫´n cho Microsoft Excel</h4>
                    <ol>
                        <li>M·ªü file Excel c·ªßa b·∫°n.</li>
                        <li>V√†o menu <strong>File</strong> ‚Üí <strong>Save As (L∆∞u d∆∞·ªõi t√™n kh√°c)</strong>.</li>
                        <li>Trong √¥ "Save as type" (ƒê·ªãnh d·∫°ng t·ªáp), ch·ªçn <strong>CSV UTF-8 (Comma delimited) (*.csv)</strong>.</li>
                        <li>Nh·∫•n <strong>Save</strong>.</li>
                    </ol>
                </div>
            </div>

            <div class="modal-actions">
                <button id="btn-close-guide" class="btn-secondary">ƒê√£ hi·ªÉu</button>
            </div>
        </div>
    </div>

    <div id="pencil-menu-modal" class="context-menu" style="display: none;">
        <ul>
            <li id="menu-edit-name">Ch·ªânh s·ª≠a t√™n b√†i</li>
            <li id="menu-postpone-session">T·∫°m ho√£n bu·ªïi n√†y (L·ªõp ngh·ªâ)</li>
        </ul>
    </div>

    <div id="quizlet-menu-modal" class="context-menu" style="display: none;">
        <ul>
            <li id="menu-open-quizlet">‚û°Ô∏è M·ªü Link Quizlet</li>
            <li id="menu-add-edit-quizlet">‚úèÔ∏è Th√™m/S·ª≠a Link Quizlet</li>
        </ul>
    </div>
    
    <div id="quizlet-link-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3>Th√™m/S·ª≠a Link Quizlet</h3>
            <div class="control-group" style="text-align: left;">
                <label for="quizlet-link-input">D√°n ƒë∆∞·ªùng link Quizlet v√†o ƒë√¢y:</label>
                <input type="url" id="quizlet-link-input" placeholder="https://quizlet.com/...">
                <small id="quizlet-link-feedback"></small>
            </div>
            <div class="modal-actions">
                <button id="btn-save-quizlet-link" class="btn-primary">L∆∞u</button>
                <button id="btn-cancel-quizlet-link" class="btn-secondary">H·ªßy</button>
            </div>
        </div>
    </div>

    <div id="report-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content" style="max-width: 600px; text-align: left;">
        <h3 style="text-align: center; color: #007bff;">üì¢ T·∫°o B√°o C√°o Bu·ªïi H·ªçc</h3>
        
        <div class="control-group">
            <label>N·ªôi dung b√°o c√°o (C√≥ th·ªÉ ch·ªânh s·ª≠a tr∆∞·ªõc khi copy):</label>
            <textarea id="report-content" rows="12" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-family: inherit; font-size: 1em;"></textarea>
        </div>

        <div class="modal-actions">
            <button id="btn-copy-report" class="btn-primary">üìã Sao ch√©p</button>
            <button id="btn-close-report" class="btn-secondary">ƒê√≥ng</button>
        </div>
        <p id="copy-status" style="text-align: center; color: green; display: none; margin-top: 10px;">‚úÖ ƒê√£ sao ch√©p v√†o b·ªô nh·ªõ ƒë·ªám!</p>
    </div>
</div>
    
    <div class="footer-text">
        This website is created by V≈© Tr·∫ßn L·∫≠p Nh√¢n, DO NOT REUSE WITHOUT ASKING FOR COPYRIGHT.
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="script.js"></script>
</body>
</html>


<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω L·ªõp H·ªçc</title>
    <link rel="icon" type="image/png" href="https://i.pinimg.com/736x/d4/4f/71/d44f715534a1827fcb5af4fa2663eb8d.jpg">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="login-page" class="page container">
        <header>
            <h1>üéì Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá Th·ªëng Qu·∫£n L√Ω L·ªãch √în T·∫≠p Spaced Repetition</h1>
            <p>Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c</p>
        </header>
        <main class="login-container">
            <button id="btn-google-login">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                <span>ƒêƒÉng nh·∫≠p v·ªõi Google</span>
            </button>
        </main>
    </div>

    <div id="app-content" style="display:none;">
        
        <div id="user-bar" class="container">
            <div id="user-info"></div>
            <button id="btn-logout" class="btn-secondary">ƒêƒÉng xu·∫•t</button>
        </div>

        <div id="home-page" class="page container">
            <header>
                <h1>üéì H·ªá Th·ªëng Qu·∫£n L√Ω L·ªõp H·ªçc</h1>
                <p>Ch√†o m·ª´ng gi√°o vi√™n quay tr·ªü l·∫°i!</p>
            </header>
            <main class="home-buttons">
                <button id="btn-show-create-form">‚ûï T·∫°o L·ªõp H·ªçc M·ªõi</button>
                <button id="btn-show-class-list">üìö Xem C√°c L·ªõp Hi·ªán C√≥</button>
            </main>
        </div>

        <div id="form-page" class="page container" style="display:none;">
            <header>
                <h1 id="form-title">T·∫°o L·ªõp H·ªçc M·ªõi</h1>
                <a href="#" class="back-link" data-target="home-page">&larr; Quay l·∫°i trang ch·ªß</a>
            </header>
            <main>
                <form id="class-form" class="controls">
                    <div class="control-group">
                        <label for="class-name">T√™n l·ªõp (t·ª± ghi)</label>
                        <input type="text" id="class-name" required>
                    </div>
                    <div class="control-group">
                        <label for="course-type">Ch·ªçn lo·∫°i l·ªõp:</label>
                        <select id="course-type">
                            <option value="starters-movers-flyers">Starters-Movers-Flyers</option>
                            <option value="ket-pet">KET-PET</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="num-units">S·ªë l∆∞·ª£ng Unit</label>
                        <input type="number" id="num-units" required min="1" value="20">
                    </div>
                     <div class="control-group">
                        <label for="lessons-per-unit">S·ªë l∆∞·ª£ng lesson m·ªói Unit</label>
                        <input type="number" id="lessons-per-unit" required min="1" value="2">
                    </div>
                    <div class="control-group">
                        <label for="class-type">Ch·ªçn m√¥ h√¨nh l·ªõp h·ªçc:</label>
                        <select id="class-type">
                            <option value="2-4">L·ªõp th·ª© 2 - 4</option>
                            <option value="3-5">L·ªõp th·ª© 3 - 5</option>
                            <option value="4-6">L·ªõp th·ª© 4 - 6</option>
                            <option value="7-cn">L·ªõp th·ª© 7 - CN</option>
                            <option value="2-4-6">L·ªõp th·ª© 2 - 4 - 6</option>
                            <option value="3-5-7">L·ªõp th·ª© 3 - 5 - 7</option>
                        </select>
                    </div>
                     <div class="control-group">
                        <label for="start-date">Ch·ªçn ng√†y khai gi·∫£ng:</label>
                        <input type="date" id="start-date" required>
                    </div>
                    <div class="control-group">
                        <label for="mini-test-dates">Ng√†y Mini Test (nh·∫≠p th·ªß c√¥ng)</label>
                        <input type="text" id="mini-test-dates" placeholder="VD: 25/11/2025, 30/12/2025">
                    </div>
                    <div class="control-group">
                        <label for="schedule-file">
                            Ho·∫∑c T·∫£i L√™n L·ªãch H·ªçc (file .csv)
                        </label>
                        <div class="file-upload-wrapper">
                            <label for="schedule-file" class="btn-upload">üìÅ Ch·ªçn File</label>
                            <span id="show-csv-guide" title="Xem h∆∞·ªõng d·∫´n t·∫°o file .csv">?</span>
                        </div>
                        <small id="file-feedback">Ch∆∞a c√≥ file n√†o ƒë∆∞·ª£c ch·ªçn.</small> 
                        <input type="file" id="schedule-file" accept=".csv" class="file-input-hidden">
                    </div>
                    <button type="submit" id="form-submit-btn">T·∫°o L·ªõp</button>
                </form>
                <div id="form-error-message" class="error"></div>
            </main>
        </div>

        <div id="class-list-page" class="page container" style="display:none;">
            <header>
                <h1>üìö C√°c L·ªõp Hi·ªán C√≥</h1>
                <a href="#" class="back-link" data-target="home-page">&larr; Quay l·∫°i trang ch·ªß</a>
            </header>
            <main id="class-list-container"></main>
        </div>
        
        <div id="schedule-details-page" class="page container result-container" style="display:none;">
            <header>
                <h1 id="schedule-class-name">üóìÔ∏è L·ªãch H·ªçc Chi Ti·∫øt</h1>
                <div class="header-actions">
                    <a href="#" class="back-link" data-target="class-list-page">&larr; Quay l·∫°i danh s√°ch l·ªõp</a>
                </div>
            </header>
            <main>
                <div id="today-summary">
                    </div>

                <div class="lookup-wrapper">
                    <label for="lookup-date">üìÖ Tra c·ª©u nhanh theo ng√†y:</label>
                    <input type="date" id="lookup-date">
                    <div id="lookup-summary"><p>Ch·ªçn m·ªôt ng√†y ƒë·ªÉ xem t√≥m t·∫Øt.</p></div>
                </div>

                <div class="table-header-wrapper">
                    <h2 class="table-title">B·∫£ng L·ªãch Chi Ti·∫øt</h2>
                    <button id="btn-undo" class="btn-secondary hidden">‚Ü©Ô∏è Ho√†n t√°c</button>
                </div>
                
                <div class="table-wrapper">
                    <table>
                        <thead id="schedule-header">
                            </thead>
                        <tbody id="schedule-body"></tbody>
                    </table>
                </div>
            </main>
        </div>

    </div>

    <div id="delete-confirm-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3>X√°c nh·∫≠n x√≥a</h3>
            <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªõp h·ªçc n√†y kh√¥ng? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
            <div class="modal-actions">
                <button id="btn-confirm-delete" class="btn-danger">C√≥, x√≥a l·ªõp</button>
                <button id="btn-cancel-delete" class="btn-secondary">Kh√¥ng, gi·ªØ l·∫°i</button>
            </div>
        </div>
    </div>

    <div id="csv-guide-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content modal-content-large">
            <h3>H∆∞·ªõng d·∫´n xu·∫•t file .csv</h3>
            <p>ƒê·ªÉ t·∫£i l·ªãch h·ªçc l√™n, file c·ªßa b·∫°n ph·∫£i c√≥ ƒë·ªãnh d·∫°ng <strong>.csv</strong> v√† ch·ª©a c√°c c·ªôt theo y√™u c·∫ßu.</p>
            
            <div class="guide-container">
                <div class="guide-column">
                    <h4>‚ö†Ô∏è Y√™u c·∫ßu ƒë·ªãnh d·∫°ng file</h4>
                    <p>File c·ªßa b·∫°n b·∫Øt bu·ªôc ph·∫£i c√≥ d√≤ng ti√™u ƒë·ªÅ ch·ª©a c·ªôt <strong>"B√†i h·ªçc"</strong> v√† c·ªôt <strong>"Ng√†y h·ªçc"</strong>. ƒê·ªãnh d·∫°ng ng√†y ph·∫£i l√† <code>DD/MM/YYYY</code>.</p>
                    <img src="https://i.pinimg.com/736x/63/a8/04/63a80429da3e7d92308a003b770fcfce.jpg" alt="ƒê·ªãnh d·∫°ng file CSV m·∫´u c√≥ ng√†y h·ªçc" style="width:100%; border:1px solid #ddd; border-radius: 8px;">
                    <p style="margin-top:10px;"><em>L∆∞u √Ω: Kh√¥ng d√πng Google Docs. Ch·ªâ d√πng Google Sheets ho·∫∑c Excel. Trong c√¥Ã£t "BaÃÄi hoÃ£c" BƒÇÃÅT BU√îÃ£C coÃÅ take note Mini test.</em></p>
                </div>
                <div class="guide-column">
                    <h4>üìÑ H∆∞·ªõng d·∫´n cho Google Sheets</h4>
                    <ol>
                        <li>M·ªü file Google Sheets c·ªßa b·∫°n.</li>
                        <li>V√†o menu <strong>T·ªáp (File)</strong> ‚Üí <strong>T·∫£i xu·ªëng (Download)</strong>.</li>
                        <li>Ch·ªçn <strong>Gi√° tr·ªã ƒë∆∞·ª£c ph√¢n t√°ch b·∫±ng d·∫•u ph·∫©y (.csv)</strong>.</li>
                    </ol>
                    <h4>üìä H∆∞·ªõng d·∫´n cho Microsoft Excel</h4>
                    <ol>
                        <li>M·ªü file Excel c·ªßa b·∫°n.</li>
                        <li>V√†o menu <strong>File</strong> ‚Üí <strong>Save As (L∆∞u d∆∞·ªõi t√™n kh√°c)</strong>.</li>
                        <li>Trong √¥ "Save as type" (ƒê·ªãnh d·∫°ng t·ªáp), ch·ªçn <strong>CSV UTF-8 (Comma delimited) (*.csv)</strong>.</li>
                        <li>Nh·∫•n <strong>Save</strong>.</li>
                    </ol>
                </div>
            </div>

            <div class="modal-actions">
                <button id="btn-close-guide" class="btn-secondary">ƒê√£ hi·ªÉu</button>
            </div>
        </div>
    </div>

    <div id="pencil-menu-modal" class="context-menu" style="display: none;">
        <ul>
            <li id="menu-edit-name">Ch·ªânh s·ª≠a t√™n b√†i</li>
            <li id="menu-postpone-session">T·∫°m ho√£n bu·ªïi n√†y (L·ªõp ngh·ªâ)</li>
        </ul>
    </div>
    
    <div class="footer-text">
        This website is created by V≈© Tr·∫ßn L·∫≠p Nh√¢n, DO NOT REUSE WITHOUT ASKING FOR COPYRIGHT.
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
